# ============================================================================
# JUEZ SEGURO BACKEND - Variables de Entorno
# ============================================================================

# Servidor
PORT=3000
NODE_ENV=development

# ============================================================================
# CLAVE MAESTRA (FCS - Cryptographic Support)
# ============================================================================
# Esta es la ÚNICA clave sensible que viene del entorno.
# Todos los demás secretos (JWT, HMAC, PKI) están en db_secrets.
# ============================================================================
MASTER_KEY_PASSWORD=MasterKey2026!JuezSeguro@DevEnv#

# JWT (el secreto está en db_secrets, solo la expiración aquí)
JWT_EXPIRES_IN=30m
JWT_REFRESH_EXPIRES_IN=7d

# Base de Datos - Usuarios (FIA)
DB_USERS_HOST=localhost
DB_USERS_PORT=5435
DB_USERS_NAME=db_usuarios
DB_USERS_USER=admin_users
DB_USERS_PASSWORD=your-password-here

# Base de Datos - Casos (FDP)
DB_CASES_HOST=localhost
DB_CASES_PORT=5433
DB_CASES_NAME=db_casos
DB_CASES_USER=admin_cases
DB_CASES_PASSWORD=your-password-here

# Base de Datos - Logs (FAU)
DB_LOGS_HOST=localhost
DB_LOGS_PORT=5434
DB_LOGS_NAME=db_logs
DB_LOGS_USER=admin_logs
DB_LOGS_PASSWORD=your-password-here

# Base de Datos - Secretos (FCS) - NUEVA
DB_SECRETS_HOST=localhost
DB_SECRETS_PORT=5436
DB_SECRETS_NAME=db_secrets
DB_SECRETS_USER=admin_secrets
DB_SECRETS_PASSWORD=your-password-here

# Seguridad (configuraciones no sensibles)
BCRYPT_ROUNDS=12
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=30

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Almacenamiento Seguro de Documentos (Sprint 2)
# Ruta donde se almacenarán los documentos PDF del expediente
SECURE_STORAGE_PATH=./storage/expedientes_seguros
# Tamaño máximo de archivo (en bytes): 10MB
MAX_FILE_SIZE=10485760
# Tipos MIME permitidos
ALLOWED_MIME_TYPES=application/pdf

# ============================================================================
# SMTP - Configuración de Correo (Gmail)
# ============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_FROM=consejo.judicatura20@gmail.com
SMTP_FROM_NAME=Sistema Juez Seguro

# ============================================================================
# MODO EDUCATIVO - Redirección de correos
# ============================================================================
# En true, redirige correos a direcciones de prueba
# Jueces → juez.jz15@gmail.com
# Secretarias → secretaria.juez20@gmail.com
EMAIL_MODO_EDUCATIVO=true

# PKI - Firma Digital (Sprint 3 - Certificados X.509)
# Rutas opcionales (tienen defaults seguros)
# El PFX_PASSWORD ahora está en db_secrets
# PKI_JUECES_CERTS_PATH=./certs/jueces
# PKI_CA_CERT_PATH=./certs/ca/ca.crt

# ============================================================================
# SECRETOS EN db_secrets
# ============================================================================
# Los siguientes secretos ya NO se configuran aquí, están en db_secrets:
# - JWT_SECRET: Secreto para firmar tokens JWT
# - HMAC_SALT: Salt para pseudónimos de jueces (HMAC-SHA256)
# - PFX_PASSWORD: Contraseña de certificados PKI
# - SMTP_USER: Usuario SMTP (consejo.judicatura20@gmail.com)
# - SMTP_PASSWORD: App Password de Gmail
#
# Para agregar/rotar secretos, usar:
#   npm run db:migrate-secrets
# ============================================================================
